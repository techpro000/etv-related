(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04bd88f8"],{"206d":function(e,t,s){"use strict";var r=s("4413"),o=s.n(r);o.a},3278:function(e,t,s){},4413:function(e,t,s){},8306:function(e,t,s){"use strict";var r=s("3278"),o=s.n(r);o.a},a55b:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("vue-particles",{attrs:{color:"#dedede",particleOpacity:.7,particlesNumber:100,shapeType:"circle",particleSize:3,linesColor:"#dedede",linesWidth:.3,lineLinked:!0,lineOpacity:.2,linesDistance:120,moveSpeed:2,hoverEffect:!0,hoverMode:"grab",clickEffect:!0,clickMode:"push"}}),s("div",{staticClass:"titleName"},[e._v(" 授权管理系统 ")]),s("div",{staticClass:"login-content"},[s("div",{staticClass:"login-content-login"},[s("div",{staticClass:"login-content-title"},[e._v(" 登录 ")]),s("div",{staticClass:"login-content-form"},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.users,rules:e.ruleValidate,"label-width":"0"}},[s("el-form-item",{attrs:{prop:"phone"}},[s("el-input",{model:{value:e.users.phone,callback:function(t){e.$set(e.users,"phone",t)},expression:"users.phone"}},[s("i",{staticClass:"el-icon-user",attrs:{slot:"prepend"},slot:"prepend"})])],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",autocomplete:"off","show-password":""},model:{value:e.users.password,callback:function(t){e.$set(e.users,"password",t)},expression:"users.password"}},[s("i",{staticClass:"el-icon-lock",attrs:{slot:"prepend"},slot:"prepend"})])],1),s("el-form-item",{attrs:{prop:"status"}},[s("JcRange",{attrs:{status:"users.status",successFun:e.onMpanelSuccess,errorFun:e.onMpanelError}})],1),s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("ruleForm")}}},[e._v("登录")])],1)],1),s("div",{staticClass:"zhoahui"})],1)])]),s("el-dialog",{attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,"show-close":!1,width:"500px",title:"忘记密码",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"retrieve",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-position":"top",rules:e.retrieve}},[s("el-form-item",{attrs:{prop:"account",label:"电话号码"}},[s("el-input",{model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),s("el-form-item",{attrs:{prop:"code",label:"验证码"}},[s("el-input",{model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}},[s("el-button",{attrs:{slot:"append"},on:{click:e.getEmailCode},slot:"append"},[e._v(e._s(e.text))])],1)],1),s("el-form-item",{attrs:{prop:"newPass",label:"新密码"}},[s("el-input",{staticClass:"getcode",model:{value:e.ruleForm.newPass,callback:function(t){e.$set(e.ruleForm,"newPass",t)},expression:"ruleForm.newPass"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.resetForm("retrieve")}}},[e._v("取消")]),s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.submitForm("retrieve")}}},[e._v("确定")])],1)],1)],1)},o=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"jc-component__range"},[s("div",{staticClass:"jc-range",class:e.rangeStatus?"success":""},[s("i",{class:e.rangeStatus?e.successIcon:e.startIcon,on:{mousedown:e.rangeMove}}),e._v(" "+e._s(e.rangeStatus?e.successText:e.startText)+" ")])])},i=[],a={props:{successFun:{type:Function},successIcon:{type:String,default:"el-icon-success"},successText:{type:String,default:"验证成功"},startIcon:{type:String,default:"el-icon-d-arrow-right"},startText:{type:String,default:"请拖住滑块，拖动到最右边"},errorFun:{type:Function},status:{type:String}},data:function(){return{disX:0,rangeStatus:!1}},create:function(){},methods:{rangeMove:function(e){var t=this,s=e.target,r=e.clientX,o=s.offsetWidth,n=s.parentElement.offsetWidth,i=n-o;if(this.rangeStatus)return!1;document.onmousemove=function(e){var n=e.clientX;t.disX=n-r,t.disX<=0&&(t.disX=0),t.disX>=i-o&&(t.disX=i),s.style.transition=".1s all",s.style.transform="translateX("+t.disX+"px)",e.preventDefault()},document.onmouseup=function(){t.disX!==i?(s.style.transition=".5s all",s.style.transform="translateX(0)",t.errorFun&&t.errorFun()):(t.rangeStatus=!0,t.status&&(t.$parent[t.status]=!0),t.successFun&&t.successFun()),document.onmousemove=null,document.onmouseup=null}}}},l=a,c=(s("8306"),s("2877")),u=Object(c["a"])(l,n,i,!1,null,"55e6597b",null),d=u.exports,p=s("ed08"),m={inject:["reload"],name:"Login",data:function(){for(var e=function(e,t,s){if(!t)return s(new Error("请拖动滑块完成验证"));s()},t="",s=0;s<4;s++)t+=parseInt(10*Math.random());return{btnLoading:!1,registView:!1,version:p["f"],langText:"",users:{phone:"",password:"",status:!1},ruleValidate:{phone:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],status:[{validator:e,trigger:"change"}]},identifyCode:t,dialogFormVisible:!1,ruleForm:{phone:"",code:"",newPass:""},retrieve:{phone:[{required:!0,message:"请输入手机号码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],newPass:[{required:!0,message:"请输入新密码",trigger:"blur"}],newPassConfirm:[{required:!0,message:"请输入确认密码",trigger:"blur"}]},text:"获取验证码",i:10,timer:null,a:!0}},methods:{onMpanelSuccess:function(){this.users.status=!0},onMpanelError:function(){this.users.status=!1},cancelAddCustome:function(e){this.registView=!1,this.$refs[e].resetFields(),Object.assign(this.$data.custom,this.$options.data.call(this).custom)},getPensonInfo:function(){var e=this;this.$post("/findPersonInfo.json").then((function(t){t.bool?(e.$cookie.set("roleId",t.personer.psRoId),e.$cookie.set("userId",t.personer.id),e.$cookie.set("userName",t.personer.psUsername),e.$cookie.set("name",t.personer.psName),e.$cookie.set("phone",t.personer.psPhone),e.$cookie.set("psHeadUrl",t.personer.psHeadUrl),1===t.personer.psRoId?e.$router.replace("/"):e.$router.replace("/authKs")):e.$elementMessage(t.msg,"error")}))},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.$post("/loginAuth.json",{userName:Object(p["e"])(t.users.phone),password:Object(p["e"])(t.users.password)}).then((function(e){0===e.code?(t.$cookie.set("token",e.data),t.getPensonInfo()):t.$elementMessage(e.msg,"error")})).catch((function(e){t.$elementMessage(e,"error")}))}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(s){if(!s)return!1;t.$get("/user/forgetPwd",{code:t.ruleForm.code,account:t.ruleForm.phone,newPwd:t.ruleForm.newPass}).then((function(s){200===s.code&&(t.$elementMessage(s.msg,"success"),t.$refs[e].resetFields(),t.dialogFormVisible=!1)})).catch((function(e){t.$elementMessage(e,"error")}))}))},getEmailCode:function(){var e=this;this.ruleForm.phone?this.a&&(this.a=!1,this.$get("/user/getVerifyCode",{account:this.ruleForm.account}).then((function(t){200===t.code&&(e.$elementMessage(t.msg,"success"),e.i=60,clearInterval(e.timer),e.text="重新获取(".concat(e.i,")"),e.timer=setInterval((function(){e.i--,e.text="重新获取(".concat(e.i,")"),e.i<=0&&(clearInterval(e.timer),e.text="获取验证码",e.a=!0)}),1e3))})).catch((function(t){e.a=!0,e.$elementMessage(t,"error")}))):this.$elementMessage("请输入手机号码","warning")},resetForm:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()}},components:{JcRange:d},onRetrievePass:function(){}},f=m,g=(s("206d"),Object(c["a"])(f,r,o,!1,null,null,null));t["default"]=g.exports}}]);