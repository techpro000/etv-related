(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d225fa4"],{e762:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",[n("div",{staticStyle:{display:"flex","margin-bottom":"15px"}},[n("el-page-header",{attrs:{content:"会议授权设备"},on:{back:e.goBack}}),n("div",{staticStyle:{"margin-left":"15px","font-size":"14px"}},[e._v("("+e._s(e.companyname)+")")])],1),n("div",{staticClass:"tableTopBar borderNotBottom"},[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("el-input",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini",placeholder:"设备编号"},model:{value:e.machineNo,callback:function(t){e.machineNo=t},expression:"machineNo"}}),n("el-select",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini",placeholder:""},model:{value:e.authState,callback:function(t){e.authState=t},expression:"authState"}},[n("el-option",{attrs:{label:"全部",value:""}}),n("el-option",{attrs:{label:"已授权",value:"1"}}),n("el-option",{attrs:{label:"未授权",value:"0"}})],1),n("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.onAddGro}},[e._v("搜索")])],1),n("div",{staticClass:"topFrom",staticStyle:{"margin-top":"10px","margin-right":"10px","min-width":"0"}},[n("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.templateDown}},[e._v("离线模板下载")]),n("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.importFile}},[e._v("导入离线授权")]),n("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.exportAuth}},[e._v("导出离线授权")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.batchAction}},[e._v("批量激活")]),"1"===e.role.toString()?n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.allDelete}},[e._v("删除点位")]):e._e(),"1"===e.role.toString()?n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.clearGssp}},[e._v("清除点位")]):e._e(),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"importFile",attrs:{type:"file"},on:{change:e.seleFile}})],1)]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",height:"calc(100% - 107px)","header-row-class-name":"tableHead",size:"small"},on:{"selection-change":e.selectM}},[n("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),e._l(e.tableType,(function(e,t){return n("el-table-column",{key:t,attrs:{formatter:e.formatter,prop:e.prop,align:"center",label:e.label,width:e.width}})}))],2),n("div",{staticClass:"tablePage borderNotTop"},[n("el-pagination",{attrs:{background:"","page-size":20,"current-page":e.currentPage,layout:"total,prev, pager, next",total:e.total},on:{"current-change":e.onpage}})],1)],1)],1)},a=[],o=n("ed08"),s=n("5c96"),r={name:"dayMeeting",inject:["reload"],data:function(){return{time:"",selectValue:"",options:[{label:"已分配授权点",value:0},{label:"已授权",value:1}],currentPage:1,total:0,loading:!1,list:[],selectMeetings:[],tableType:[{prop:"machineNo",label:"设备Mac"},{prop:"activeKey",label:"批次号"},{prop:"activeSecret",label:"激活码"},{prop:"importNo",label:"离线激活编号"},{prop:"authState",label:"授权状态",formatter:function(e,t,n){return 1===n?"已授权":"未授权"}},{prop:"updateTime",label:"授权时间"},{prop:"createTime",label:"操作时间"},{label:"操作",minWidth:"280",formatter:this.thumb}],machineNo:"",authState:"",role:this.$cookie.get("roleId"),companyname:this.$route.query.companyname}},created:function(){this.getResList()},methods:{goBack:function(){this.$router.go(-1)},searchInfo:function(){this.currentPage=1,this.getResList()},getResList:function(){var e=this;this.loading=!0,this.$get("/selectPageWhiteBoardOnline.json",{pageNum:this.currentPage,pageSize:20,machieNo:this.machineNo,authState:this.authState,cuId:this.$route.query.cuId}).then((function(t){e.loading=!1,0===t.code?(e.list=t.data.list,e.total=t.data.sumNum):e.$elementMessage(t.msg,"error")}))},onpage:function(e){this.currentPage=e,this.getResList()},selectM:function(e){this.selectMeetings=e},onAddGro:function(){this.getResList()},allDelete:function(){for(var e=this,t=0;t<this.selectMeetings.length;t++)if(1===this.selectMeetings[t].authState)return void this.$elementMessage("不能删除以激活的","error");this.$prompt("请输入操作码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password",inputValidator:function(e){if(null===e)return!1},inputErrorMessage:"请输入操作密码"}).then((function(t){var n=t.value;e.$post("/deleteWhiteBoardOnlinePoint.json",{ids:e.selectMeetings.map((function(e){return e.id})).toLocaleString(),cuId:e.$route.query.cuId,operatePwd:n}).then((function(t){0===t.code?(e.$elementMessage(t.msg,"success"),e.reload()):e.$elementMessage(t.msg,"error")})).catch((function(e){}))})).catch((function(){e.$message({type:"info",message:"取消输入"})}))},clearGssp:function(){for(var e=this,t=0;t<this.selectMeetings.length;t++)if(1===this.selectMeetings[t].authState)return void this.$elementMessage("不能删除以激活的","error");this.$prompt("请输入操作码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password",inputValidator:function(e){if(null===e)return!1},inputErrorMessage:"请输入操作密码"}).then((function(t){var n=t.value;e.$post("/clearWhiteBoardOnlinePoint.json",{ids:e.selectMeetings.map((function(e){return e.id})).toLocaleString(),cuId:e.$route.query.cuId,operatePwd:n}).then((function(t){0===t.code?(e.$elementMessage(t.msg,"success"),e.reload()):e.$elementMessage(t.msg,"error")})).catch((function(e){}))})).catch((function(){e.$message({type:"info",message:"取消输入"})}))},thumb:function(e){var t=this,n=this.$createElement;return n("div",[n("el-button",{attrs:{disabled:1===e.authState||!e.machineNo,size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(){return t.onOneActivate(e)}}},["激活"])])},onOneActivate:function(e){this.onActivate(e.id)},onActivate:function(e){var t=this;this.$post("/activeWhiteBoardOnlinePoint.json",{ids:e.toString(),cuId:this.$route.query.cuId}).then((function(e){0===e.code?(t.$elementMessage(e.msg,"success"),t.reload()):t.$elementMessage(e.msg,"error")}))},batchAction:function(){for(var e=0;e<this.selectMeetings.length;e++)if(1===this.selectMeetings[e].authState||null===this.selectMeetings[e].machineNo||""===this.selectMeetings[e].machineNo)return void this.$elementMessage("设备不能重复激活或MAC为空","error");this.onActivate(this.selectMeetings.map((function(e){return e.id})).toLocaleString())},templateDown:function(){window.open(o["b"]+"/downloadWBAuthTemplFile.json","_blank")},importFile:function(){this.$refs["importFile"].click()},seleFile:function(){var e=this,t=this.$refs["importFile"].files[0],n=new FormData;n.append("file",t),n.append("cuId",this.$route.query.cuId);var i=s["Loading"].service({fullscreen:!0});this.$post("/importWBAuthFile.json",n).then((function(t){i.close(),0===t.code?(i.close(),e.$elementMessage(t.msg,"success")):e.$elementMessage(t.msg,"error"),e.$refs["importFile"].value="",e.reload()}))},exportAuth:function(){var e=this;this.$prompt("请输入离线激活编号","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"非必填，不填时导出所有设备授权信息",inputValidator:function(e){if(null!==e&&23!==e.length)return!1},inputErrorMessage:"请输入离线文件编号"}).then((function(t){var n=t.value,i=null===n?"":n;window.open(o["b"]+"/exportWBAuthFile.json?cuId="+e.$route.query.cuId+"&importNo = "+i,"_blank")})).catch((function(){}))}},components:{}},l=r,c=n("2877"),u=Object(c["a"])(l,i,a,!1,null,"5984c8e0",null);t["default"]=u.exports}}]);