(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b1eb978"],{"333d":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,"pager-count":e.pagerCount,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},o=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,l){return e/=l/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var l=i(),o=e-l,s=20,u=0;t="undefined"===typeof t?500:t;var m=function e(){u+=s;var i=Math.easeInOutQuad(u,l,o,t);r(i),u<t?n(e):a&&"function"===typeof a&&a()};m()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},pagerCount:{type:Number,default:document.body.clientWidth<992?5:7},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},data:function(){return{}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.currentPage*e>this.total&&(this.currentPage=1),this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},m=u,c=(a("96bd"),a("2877")),d=Object(c["a"])(m,l,o,!1,null,"cf1facd6",null);t["a"]=d.exports},"614b":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"informationEntry"},[a("div",{staticClass:"informationEntry-Retrieval"},[a("el-form",{staticClass:"demo-form-inline",attrs:{size:"mini",inline:!0,model:e.queryParams}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{model:{value:e.queryParams.customerName,callback:function(t){e.$set(e.queryParams,"customerName",t)},expression:"queryParams.customerName"}})],1),a("el-form-item",{attrs:{label:"销售人员"}},[a("el-input",{model:{value:e.queryParams.belongSalesmanName,callback:function(t){e.$set(e.queryParams,"belongSalesmanName",t)},expression:"queryParams.belongSalesmanName"}})],1),a("el-form-item",{attrs:{label:"FAE人员"}},[a("el-input",{model:{value:e.queryParams.belongFaeName,callback:function(t){e.$set(e.queryParams,"belongFaeName",t)},expression:"queryParams.belongFaeName"}})],1),a("el-form-item",{attrs:{label:"客户等级"}},[a("el-input",{model:{value:e.queryParams.level,callback:function(t){e.$set(e.queryParams,"level",t)},expression:"queryParams.level"}})],1),a("el-form-item",{attrs:{label:"合作时间"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.queryParams.startCooperationTime,callback:function(t){e.$set(e.queryParams,"startCooperationTime",t)},expression:"queryParams.startCooperationTime"}}),e._v(" 至 "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.queryParams.endCooperationTime,callback:function(t){e.$set(e.queryParams,"endCooperationTime",t)},expression:"queryParams.endCooperationTime"}})],1),a("el-form-item",{attrs:{label:"客户标签"}},[a("el-input",{model:{value:e.queryParams.tagName,callback:function(t){e.$set(e.queryParams,"tagName",t)},expression:"queryParams.tagName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getDataList}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"informationEntry-table"},[a("div",{staticClass:"table-btns"},[a("div",[a("el-button",{attrs:{type:"success"},on:{click:e.importFile}},[e._v("导入客户")])],1),a("div",[a("el-button",{attrs:{type:"success"},on:{click:e.showAddDialog}},[e._v("添加客户")]),a("el-button",{attrs:{type:"danger",disabled:0===e.selelctCustomer.length},on:{click:function(t){return e.deleteCustomer()}}},[e._v("批量删除 ")])],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{align:"center",prop:"customerName",label:"客户名称"}}),a("el-table-column",{attrs:{align:"center",prop:"belongSalesmanName",label:"销售工程师"}}),a("el-table-column",{attrs:{align:"center",prop:"belongFaeName",label:"FAE工程师"}}),a("el-table-column",{attrs:{align:"center",width:"180",prop:"firstCooperationTime",label:"合作时间"}}),a("el-table-column",{attrs:{align:"center",prop:"levelCode",label:"客户等级",formatter:e.levelCodeFormatter}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"tagName",label:"客户标签",formatter:e.tagNameFormatter}}),a("el-table-column",{attrs:{width:"180",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v(" 编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getDataList}})],1),a("el-dialog",{attrs:{"append-to-body":"",title:"添加客户",width:"800px","close-on-click-modal":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[a("el-input",{attrs:{placeholder:"请输入客户名称"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销售人员",prop:"belongSalesmanName"}},[a("el-input",{model:{value:e.form.belongSalesmanName,callback:function(t){e.$set(e.form,"belongSalesmanName",t)},expression:"form.belongSalesmanName"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"FAE工程师",prop:"belongFaeName"}},[a("el-input",{model:{value:e.form.belongFaeName,callback:function(t){e.$set(e.form,"belongFaeName",t)},expression:"form.belongFaeName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合作时间",prop:"firstCooperationTime"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.firstCooperationTime,callback:function(t){e.$set(e.form,"firstCooperationTime",t)},expression:"form.firstCooperationTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户等级"}},[a("el-select",{model:{value:e.form.levelCode,callback:function(t){e.$set(e.form,"levelCode",t)},expression:"form.levelCode"}},[a("el-option",{attrs:{label:"A",value:"1"}}),a("el-option",{attrs:{label:"B",value:"2"}}),a("el-option",{attrs:{label:"C",value:"3"}}),a("el-option",{attrs:{label:"D",value:"4"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"客户标签","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.tagName,callback:function(t){e.$set(e.form,"tagName",t)},expression:"form.tagName"}}),a("div",{staticStyle:{color:"red","font-size":"12px"}},[e._v(" ps：客户标签以 '/' 分隔开 ")])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addClientSubmit("form")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{"custom-class":"dialog_custom_class",title:"客户导入","append-to-body":"",visible:e.dialogVisible,width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("div",[a("el-timeline",{attrs:{reverse:!1}},[a("el-timeline-item",[a("span",{staticClass:"label"},[e._v("下载模板：")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.downloadTemplate}},[e._v(" 下载模板 ")])],1),a("el-timeline-item",[a("span",{staticClass:"label"},[e._v("选择表格：")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.importData}},[e._v("选择表格")]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(e.fileName)+" ")]),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"upFile",attrs:{type:"file",accept:".xls, .xlsx"},on:{change:e.selectData}})],1)],1)],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.upFile}},[e._v("确 定")])],1)])],1)},o=[],n=(a("b0c0"),a("d81d"),a("d3b7"),a("25f0"),a("d0a4")),r=a("b775"),i=a("333d"),s={data:function(){return{tableData:[],queryParams:{customerName:null,belongSalesmanName:null,belongFaeName:null,level:null,firstCooperationTime:"",tagName:"",startCooperationTime:"",endCooperationTime:"",pageNum:1,pageSize:10,customerType:"INNER_CUS"},total:0,dialogFormVisible:!1,dialogVisible:!1,form:{},rules:{customerCode:[{required:!0,message:"客户编码不能为空",trigger:["blur","change"]}],customerName:[{required:!0,message:"客户名称不能为空",trigger:["blur","change"]}],belongSalesmanName:[{required:!0,message:"销售人员不能为空",trigger:["blur","change"]}],belongFaeName:[{required:!0,message:"FAE人员不能为空",trigger:["blur","change"]}],firstCooperationTime:[{required:!0,message:"首次合作时间不能为空",trigger:["blur","change"]}]},rulesContacts:{name:[{required:!0,message:"联系人姓名不能为空",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],gender:[{required:!0,message:"联系人性别不能为空",trigger:["blur","change"]}],positionCode:[{required:!0,message:"联系人职位",trigger:"blur"}],tel:[{required:!0,message:"请输入手机号码",trigger:"blur"}]},formLabelWidth:"100px",fileName:"",contactsForm:{},file:null,contactsData:[],selelctCustomer:[]}},mounted:function(){this.getDataList()},methods:{getDataList:function(){var e=this;Object(n["e"])(this.queryParams).then((function(t){e.tableData=t.rows,e.total=t.total})).catch((function(e){}))},handleEdit:function(e){var t=this;Object(n["c"])(e.customerId).then((function(e){t.form=e.data,t.dialogFormVisible=!0}))},handleDelete:function(e){this.deleteCustomer(e)},selectData:function(){this.file=this.$refs.upFile.files[0],this.fileName=this.file.name},importData:function(){this.$refs.upFile.click()},showAddDialog:function(){this.formReset(),this.dialogFormVisible=!0},levelCodeFormatter:function(e){var t=this.$createElement;return"1"===e.levelCode?t("span",["A"]):"2"===e.levelCode?t("span",["B"]):"3"===e.levelCode?t("span",["C"]):"4"===e.levelCode?t("span",["D"]):void 0},tagNameFormatter:function(e){var t=this.$createElement;return""===e.tagName||null===e.tagName?"":t("div",[e.tagName.split("/").map((function(e){return t("span",{class:"tagName"},[e])}))])},cancel:function(){this.dialogFormVisible=!1,this.formReset()},formReset:function(){this.form={customerInfoExpand:{demandClue:null},tagName:null,customerId:null,addMethodCode:null,faeId:null,belongFaeName:null,customerTagRelList:[],belongSalesmanName:null,salesmanId:null,levelCode:null,firstCooperationTime:null,salesStage:null,customerCode:null,customerName:null,customerNick:null,customerEn:null,customerDes:null,customerLogo:null,customerType:"INNER_CUS",address:null,website:null,email:null,tel:null,contact1:null,contact1Tel:null,contact1Email:null,contact2:null,contact2Tel:null,contact2Email:null,creditCode:null,enableFlag:"Y",remark:null,attr1:null,attr2:null,attr3:null,attr4:null,createBy:null,createTime:null,updateBy:null,updateTime:null,companyScale:null,productsType:null},this.resetForm("form")},handleSelectionChange:function(e){this.selelctCustomer=e},importFile:function(){this.fileName="",this.file=null,this.dialogVisible=!0},deleteCustomer:function(e){var t=this,a=void 0===e?this.selelctCustomer.map((function(e){return e.customerId})).toString():e.customerId;this.$modal.confirm("是否确认删除该客户").then((function(){return Object(n["b"])(a)})).then((function(){t.getDataList(),t.$modal.msgSuccess("删除成功")}))},addClientSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.form.customerId?Object(n["f"])(t.form).then((function(e){t.dialogFormVisible=!1,t.getDataList()})):Object(n["a"])(t.form).then((function(e){t.dialogFormVisible=!1,t.getDataList()}))}))},upFile:function(){var e=this;if(this.file){var t=new FormData;t.append("excelFile",this.file),Object(n["d"])(t).then((function(t){e.dialogVisible=!1,e.$modal.msgSuccess(t.msg),e.$refs.upFile.value="",e.getDataList()})).catch((function(t){e.$refs.upFile.value=""}))}else this.$modal.msgSuccess("请选择文件")},onClose:function(){this.$refs.upFile.value="",this.dialogVisible=!1},downloadTemplate:function(){Object(r["b"])("/mes/md/customer/downloadExcelCustomerTpl",{},"客户列表.xlsx",{})}},components:{pagination:i["a"]}},u=s,m=(a("d2ad"),a("2877")),c=Object(m["a"])(u,l,o,!1,null,null,null);t["default"]=c.exports},"810d":function(e,t,a){},"865a":function(e,t,a){},"96bd":function(e,t,a){"use strict";a("810d")},d0a4:function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return u}));var l=a("b775");function o(e){return Object(l["a"])({url:"/mes/md/customer/list",method:"get",params:e})}function n(e){return Object(l["a"])({url:"/mes/md/customer/"+e,method:"get"})}function r(e){return Object(l["a"])({url:"/mes/md/customer",method:"post",data:e})}function i(e){return Object(l["a"])({url:"/mes/md/customer",method:"put",data:e})}function s(e){return Object(l["a"])({url:"/mes/md/customer/"+e,method:"delete"})}function u(e){return Object(l["a"])({url:"/mes/md/customer/importExcelCustomers",method:"post",data:e})}},d2ad:function(e,t,a){"use strict";a("865a")},d81d:function(e,t,a){"use strict";var l=a("23e7"),o=a("b727").map,n=a("1dde"),r=n("map");l({target:"Array",proto:!0,forced:!r},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);